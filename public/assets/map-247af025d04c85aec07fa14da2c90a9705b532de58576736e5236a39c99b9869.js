"use strict";function sp_init_map_script(e){var a="",o=data,t="ROADMAP",n=a+"images/icons/close.png",l=a+"images/icons/cluster.png",s="#000",i="12",r="false",g="",d='<div class="provider-loader-wrap"><div class="provider-loader"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div></div>';if("found"==o.status)var c=o.listing,m=new google.maps.LatLng(c[0].latitude,c[0].longitude);else var m=new google.maps.LatLng("51.5001524","-0.1262362");if("ROADMAP"==t)var p=google.maps.MapTypeId.ROADMAP;else if("SATELLITE"==t)var p=google.maps.MapTypeId.SATELLITE;else if("HYBRID"==t)var p=google.maps.MapTypeId.HYBRID;else if("TERRAIN"==t)var p=google.maps.MapTypeId.TERRAIN;else var p=google.maps.MapTypeId.ROADMAP;var u=!0,f="unlock";"false"==r&&(u=!1,f="lock");var v={zoom:parseInt(i),maxZoom:20,mapTypeId:p,scaleControl:!0,scrollwheel:u,disableDefaultUI:!0},y=new google.maps.Map(document.getElementById(e),v),h=new google.maps.LatLngBounds;if(document.getElementById("doc-mapplus")&&google.maps.event.addDomListener(document.getElementById("doc-mapplus"),"click",function(){var e=parseInt(y.getZoom(),10);e++,e>20&&(e=20),y.setZoom(e)}),document.getElementById("doc-mapminus")&&google.maps.event.addDomListener(document.getElementById("doc-mapminus"),"click",function(){var e=parseInt(y.getZoom(),10);e--,e<0&&(e=0),y.setZoom(e)}),document.getElementById("doc-lock")&&google.maps.event.addDomListener(document.getElementById("doc-lock"),"click",function(){"lock"==f?(y.setOptions({scrollwheel:!0,draggable:!0}),jQuery("#doc-lock").html('<i class="fa fa-unlock-alt" aria-hidden="true"></i>'),f="unlock"):"unlock"==f&&(y.setOptions({scrollwheel:!1,draggable:!1}),jQuery("#doc-lock").html('<i class="fa fa-lock" aria-hidden="true"></i>'),f="lock")}),jQuery(document).on("click",".tg-btnmapview",function(){jQuery(".tg-mapinnerbanner").toggleClass("tg-open"),jQuery(".tg-mapinnerbanner").hasClass("tg-open")&&jQuery(".tg-mapinnerbanner").append(d),setTimeout(function(){jQuery(".tg-mapinnerbanner").find(".provider-loader-wrap").remove(),google.maps.event.trigger(y,"resize"),y.setCenter(m)},1e3)}),"found"==o.status){jQuery("#gmap-noresult").html("").hide();for(var I=new Array,k=(new Array,0);k<c.length;k++){I[k]=new google.maps.Marker({position:new google.maps.LatLng(c[k].latitude,c[k].longitude),map:y,icon:c[k].marker,title:c[k].title,animation:google.maps.Animation.DROP,visible:!0}),h.extend(I[k].getPosition());var w=document.createElement("div");w.className="tg-infoBox";var L="";L+='<div class="tg-serviceprovider">',L+='<figure class="tg-featuredimg"><img src="'+c[k].image+'" alt="'+c[k].title+'"></figure>',L+='<div class="tg-companycontent">',"yes"==c[k].featured&&(L+='<span class="tg-featured"><i class="fa fa-bolt"></i></span>'),L+='<ul class="tg-tags"><li><a class="tg-tag tg-featuredtag" href="#">featured</a></li><li><a class="tg-tag tg-verifiedtag" href="#">verified</a></li></ul>',L+='<div class="tg-title"><h3><a href="'+c[k].url+'">'+c[k].title+"</a></h3></div>",L+='<ul class="tg-matadata"><li><span class="tg-stars"><span></span></span></li><li><i class="fa fa-thumbs-o-up"></i><em>99% (1009 votes)</em></li></ul>',L+="</div>",w.innerHTML=L;var B={content:w,disableAutoPan:!0,maxWidth:0,alignBottom:!0,pixelOffset:new google.maps.Size(-390,-70),zIndex:null,closeBoxMargin:"0 0 -16px -16px",closeBoxURL:n,infoBoxClearance:new google.maps.Size(1,1),isHidden:!1,pane:"floatPane",enableEventPropagation:!1},T=new InfoBox(B);attachInfoBoxToMarker(y,I[k],T)}y.fitBounds(h);var x={ignoreHidden:!0,styles:[{textColor:s,url:l,width:23,height:30}]};new MarkerClusterer(y,I,x)}else y.fitBounds(h),jQuery("#gmap-noresult").html(g).show()}function attachInfoBoxToMarker(e,a,o){google.maps.event.addListener(a,"click",function(){var t=Math.pow(2,e.getZoom()),n=100/t||0,l=e.getProjection(),s=a.getPosition(),i=l.fromLatLngToPoint(s),r=new google.maps.Point(i.x,i.y-n),g=l.fromPointToLatLng(r);e.setCenter(g),jQuery(".infoBox").hide(),o.open(e,a)})}